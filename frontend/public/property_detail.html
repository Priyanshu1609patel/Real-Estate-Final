<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Property Details | Real Estate</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Roboto', Arial, sans-serif;
      margin: 0;
      background: #f7f8fa;
      color: #222;
    }
    header {
      background: #1a237e;
      color: #fff;
      padding: 1.2rem 2rem 1rem 2rem;
      display: flex;
      align-items: center;
      box-shadow: 0 2px 8px rgba(26,35,126,0.08);
    }
    .site-title {
      font-size: 1.5rem;
      font-weight: 700;
      letter-spacing: 1px;
    }
    .main-container {
      max-width: 1200px;
      margin: 2rem auto;
      background: #fff;
      border-radius: 14px;
      box-shadow: 0 4px 18px rgba(0,0,0,0.08);
      padding: 2rem 2rem 2.5rem 2rem;
    }
    .property-header {
      display: flex;
      flex-wrap: wrap;
      gap: 2rem;
      align-items: flex-start;
      margin-bottom: 2rem;
    }
    .property-image {
      width: 380px;
      height: 260px;
      border-radius: 12px;
      object-fit: cover;
      background: #e0e0e0;
      box-shadow: 0 2px 12px rgba(0,0,0,0.07);
    }
    .property-info {
      flex: 1 1 320px;
      min-width: 280px;
    }
    .property-title {
      font-size: 2rem;
      font-weight: 700;
      color: #1a237e;
      margin-bottom: 0.5rem;
    }
    .property-location {
      font-size: 1.1rem;
      color: #444;
      margin-bottom: 0.7rem;
    }
    .property-price {
      font-size: 1.3rem;
      color: #388e3c;
      font-weight: 700;
      margin-bottom: 1rem;
    }
    .property-desc {
      font-size: 1.05rem;
      color: #333;
      margin-bottom: 1.2rem;
    }
    .section {
      margin-bottom: 2.2rem;
    }
    .section-title {
      font-size: 1.25rem;
      color: #1a237e;
      font-weight: 700;
      margin-bottom: 0.7rem;
      border-bottom: 2px solid #e0e0e0;
      padding-bottom: 0.2rem;
    }
    .section-content {
      background: #f5f6fa;
      border-radius: 10px;
      padding: 1.2rem 1rem 1rem 1rem;
      box-shadow: 0 1px 6px rgba(0,0,0,0.06);
    }
    .section-content table {
      width: 100%;
      border-collapse: collapse;
      font-size: 1rem;
      table-layout: fixed;
      word-break: break-word;
    }
    .section-content td {
      padding: 0.5rem 0.3rem;
      border-bottom: 1px solid #e0e0e0;
      color: #333;
      word-break: break-word;
      max-width: 180px;
      white-space: pre-line;
    }
    .section-content tr:last-child td {
      border-bottom: none;
    }
    .amenities-list {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 0.5rem;
    }
    .amenity {
      background: #e8eaf6;
      color: #3949ab;
      border-radius: 5px;
      padding: 0.25rem 0.7rem;
      font-size: 0.95rem;
    }
    /* Hero Section Styles */
    #heroSection {
      position: relative;
      width: 100vw;
      left: 50%;
      right: 50%;
      margin-left: -50vw;
      margin-right: -50vw;
      min-height: 320px;
      max-height: 420px;
      overflow: hidden;
      background: #222;
      display: flex;
      align-items: flex-end;
      justify-content: flex-start;
    }
    .hero-image-bg {
      position: absolute;
      top: 0; left: 0; width: 100%; height: 100%;
      object-fit: cover;
      filter: brightness(0.65);
      z-index: 1;
    }
    .hero-overlay {
      position: relative;
      z-index: 2;
      padding: 2.5rem 2.5rem 2.5rem 3.5rem;
      color: #fff;
      max-width: 700px;
    }
    .hero-title {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      text-shadow: 0 2px 8px rgba(0,0,0,0.25);
    }
    .hero-location {
      font-size: 1.2rem;
      margin-bottom: 0.7rem;
      text-shadow: 0 1px 4px rgba(0,0,0,0.18);
    }
    .hero-price {
      font-size: 1.5rem;
      font-weight: 700;
      color: #69f06b;
      margin-bottom: 1.2rem;
      text-shadow: 0 1px 4px rgba(0,0,0,0.18);
    }
    @media (max-width: 900px) {
      #heroSection {
        min-height: 200px;
        max-height: 260px;
      }
      .hero-title { font-size: 1.5rem; }
      .hero-overlay { padding: 1.2rem 1.2rem 1.2rem 1.5rem; }
    }
    @media (max-width: 600px) {
      #heroSection {
        min-height: 120px;
        max-height: 160px;
      }
      .hero-title { font-size: 1.1rem; }
      .hero-overlay { padding: 0.7rem 0.7rem 0.7rem 0.7rem; }
    }
  </style>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>
<body>
  <main>
    <div id="heroSection"></div>
    <div class="main-container">
      <div id="propertyDetailContainer"></div>
      <div id="reviewSection" style="margin-top:2.5rem;"></div>
      <div id="connectivitySection" style="margin-top:2.5rem;"></div>
    </div>
    <!-- Modal for Property Insights -->
    <div id="insightsModal" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.35);z-index:1000;align-items:center;justify-content:center;">
      <div id="insightsModalBox" style="background:#fff;border-radius:16px;max-width:540px;width:95vw;padding:2rem 1.5rem;box-shadow:0 8px 32px rgba(0,0,0,0.18);position:relative;max-height:90vh;overflow-y:auto;display:flex;flex-direction:column;">
        <button onclick="document.getElementById('insightsModal').style.display='none'" style="position:absolute;top:1rem;right:1rem;font-size:1.3rem;background:none;border:none;cursor:pointer;">&times;</button>
        <div id="insightsModalContent"></div>
      </div>
    </div>
  </main>
  <script>
    const API_URL = 'http://localhost:3001/api/properties/full';
    const PLACEHOLDER_IMG = 'https://via.placeholder.com/380x260?text=No+Image';
    function getQueryParam(name) {
      const url = new URL(window.location.href);
      return url.searchParams.get(name);
    }
    async function fetchPropertyById(id) {
      try {
        const res = await fetch(API_URL);
        if (!res.ok) throw new Error('Failed to fetch properties');
        const all = await res.json();
        return all.find(p => p.id == id);
      } catch {
        return null;
      }
    }
    async function fetchByProp(endpoint, property_id) {
      try {
        const res = await fetch(`http://localhost:3001/api/${endpoint}`);
        if (!res.ok) return null;
        const arr = await res.json();
        return arr.find(x => x.property_id == property_id) || null;
      } catch { return null; }
    }
    let cachedProperty = null;
    let cachedSpecs = null;
    async function renderHeroSection(p) {
      const hero = document.getElementById('heroSection');
      const img = p.mainImage && p.mainImage !== '/images/placeholder-property.jpg' ? p.mainImage : PLACEHOLDER_IMG;
      hero.innerHTML = `
        <img class="hero-image-bg" src="${img}" alt="${p.name}">
        <div class="hero-overlay">
          <div class="hero-title">${p.name || '-'}</div>
          <div class="hero-location">${p.location?.area_name || '-'}, ${p.location?.city || '-'}, ${p.location?.state || '-'}</div>
          <div class="hero-price">₹${p.min_price?.toLocaleString() || '-'} - ₹${p.max_price?.toLocaleString() || '-'}</div>
        </div>
      `;
    }
    async function renderPropertyDetail() {
      const id = getQueryParam('id');
      if (!id) {
        document.getElementById('propertyDetailContainer').innerHTML = '<div style="color:red;">No property selected.</div>';
        return;
      }
      const p = await fetchPropertyById(id);
      if (!p) {
        document.getElementById('propertyDetailContainer').innerHTML = '<div style="color:red;">Property not found.</div>';
        return;
      }
      await renderHeroSection(p);
      // Fetch extra details
      const [financial, legal, market, investment] = await Promise.all([
        fetchByProp('financial_details', p.id),
        fetchByProp('legal_details', p.id),
        fetchByProp('market_analysis', p.id),
        fetchByProp('investment_analysis', p.id)
      ]);
      cachedProperty = p;
      cachedSpecs = { financial, legal, market, investment };
      // Render
      let html = '';
      // Description Section
      html += `<div class='section'><div class='section-title'>Description</div><div class='section-content'>${p.description || '-'}</div></div>`;
      // Developer
      html += `<div class='section'><div class='section-title'>Developer</div><div class='section-content'><table>
        <tr><td>Name</td><td>${p.developer?.name || '-'}</td></tr>
        <tr><td>Website</td><td>${p.developer?.website_url ? `<a href='${p.developer.website_url}' target='_blank'>${p.developer.website_url}</a>` : '-'}</td></tr>
      </table></div></div>`;
      // Amenities
      html += `<div class='section'><div class='section-title'>Amenities</div><div class='section-content'><div class='amenities-list'>${(p.amenities && p.amenities.length) ? p.amenities.map(a => `<span class='amenity'>${a.name}</span>`).join('') : '-'}</div></div></div>`;
      // Financial
      html += `<div class='section'><div class='section-title'>Financial Details</div><div class='section-content'><table>
        <tr><td>Base Price/sqft</td><td>₹${financial?.base_price_per_sqft || '-'}</td></tr>
        <tr><td>Premium Charges/sqft</td><td>₹${financial?.premium_charges_per_sqft || '-'}</td></tr>
        <tr><td>Registration %</td><td>${financial?.registration_percentage || '-'}</td></tr>
        <tr><td>GST %</td><td>${financial?.gst_percentage || '-'}</td></tr>
        <tr><td>Maintenance/sqft</td><td>₹${financial?.maintenance_per_sqft || '-'}</td></tr>
        <tr><td>Parking Charges</td><td>₹${financial?.parking_charges || '-'}</td></tr>
        <tr><td>Loan Eligibility %</td><td>${financial?.loan_eligibility_percentage || '-'}</td></tr>
        <tr><td>Preferred Banks</td><td>${financial?.preferred_banks || '-'}</td></tr>
      </table></div></div>`;
      // Legal
      html += `<div class='section'><div class='section-title'>Legal Details</div><div class='section-content'><table>
        <tr><td>RERA Reg.</td><td>${legal?.rera_registration || '-'}</td></tr>
        <tr><td>Commencement Cert.</td><td>${legal?.commencement_certificate || '-'}</td></tr>
        <tr><td>Occupancy Cert.</td><td>${legal?.occupancy_certificate || '-'}</td></tr>
        <tr><td>Approved Plan</td><td>${legal?.approved_plan || '-'}</td></tr>
        <tr><td>Deviation Status</td><td>${legal?.deviation_status || '-'}</td></tr>
        <tr><td>Litigation Status</td><td>${legal?.litigation_status || '-'}</td></tr>
        <tr><td>Title Verification</td><td>${legal?.title_verification || '-'}</td></tr>
        <tr><td>Bank Approvals</td><td>${legal?.bank_approvals || '-'}</td></tr>
        <tr><td>Insurance</td><td>${legal?.insurance_coverage || '-'}</td></tr>
        <tr><td>Compliance</td><td>${legal?.compliance_status || '-'}</td></tr>
        <tr><td>Legal Opinion</td><td>${legal?.legal_opinion || '-'}</td></tr>
      </table></div></div>`;
      // Market
      html += `<div class='section'><div class='section-title'>Market Analysis</div><div class='section-content'><table>
        <tr><td>Current Avg Price/sqft</td><td>₹${market?.current_avg_price_per_sqft || '-'}</td></tr>
        <tr><td>1yr Appreciation %</td><td>${market?.price_appreciation_1year || '-'}</td></tr>
        <tr><td>3yr Appreciation %</td><td>${market?.price_appreciation_3year || '-'}</td></tr>
        <tr><td>Inventory Months</td><td>${market?.inventory_months || '-'}</td></tr>
        <tr><td>Market Segment</td><td>${market?.market_segment || '-'}</td></tr>
        <tr><td>Buyer Profile</td><td>${market?.buyer_profile || '-'}</td></tr>
        <tr><td>Resale Potential</td><td>${market?.resale_potential || '-'}</td></tr>
        <tr><td>Rental Demand</td><td>${market?.rental_demand || '-'}</td></tr>
      </table></div></div>`;
      // Investment
      html += `<div class='section'><div class='section-title'>Investment Analysis</div><div class='section-content'><table>
        <tr><td>Type</td><td>${investment?.investment_type || '-'}</td></tr>
        <tr><td>Entry Cost</td><td>₹${investment?.entry_cost || '-'}</td></tr>
        <tr><td>Annual Rental Income</td><td>₹${investment?.annual_rental_income || '-'}</td></tr>
        <tr><td>Annual Appreciation</td><td>${investment?.annual_appreciation || '-'}</td></tr>
        <tr><td>Maintenance Cost</td><td>₹${investment?.maintenance_cost || '-'}</td></tr>
        <tr><td>Total Returns (5yr)</td><td>${investment?.total_returns_5year || '-'}</td></tr>
        <tr><td>IRR %</td><td>${investment?.irr_percentage || '-'}</td></tr>
        <tr><td>Payback Period (yrs)</td><td>${investment?.payback_period_years || '-'}</td></tr>
        <tr><td>Risk Assessment</td><td>${investment?.risk_assessment || '-'}</td></tr>
        <tr><td>Liquidity Rating</td><td>${investment?.liquidity_rating || '-'}</td></tr>
        <tr><td>Tax Benefits</td><td>${investment?.tax_benefits || '-'}</td></tr>
        <tr><td>Investment Grade</td><td>${investment?.investment_grade || '-'}</td></tr>
      </table></div></div>`;
      document.getElementById('propertyDetailContainer').innerHTML = html;
    }
    // --- Review Section Data (example, replace with real data as available) ---
    const reviewMetrics = [
      { label: 'Land Area', value: '16.00 Acres', avg: '11.99 acres', icon: '😊' },
      { label: 'Clubhouse Area', value: '45000 sqft', avg: '20724 sqft', icon: '😊' },
      { label: 'Park Area', value: '1.56 Acres', avg: '0.68 Acres', icon: '😊' },
      { label: 'Open Area', value: '85%', avg: '71%', icon: '😊' },
      { label: 'Units', value: '1100', avg: '831 units', icon: '😐' },
      { label: 'Price Per Sq.Ft.', value: '₹14634', avg: '10666', icon: '☹️' },
      { label: 'Clubhouse Factor', value: '41 sqft / unit', avg: '46 sqft / unit', icon: '😐' },
      { label: 'Closest Metro', value: '1.32 kms', avg: '7.04 kms', icon: '😊' },
      { label: 'Approach Road', value: '25 meters', avg: '19 meters', icon: '😊' },
      { label: 'Unit Density', value: '69 units/acre', avg: '79 units/acre', icon: '😊' },
    ];
    function renderReviewSection() {
      let html = `<div style='display:flex;flex-wrap:wrap;gap:2rem 0;'>
        <div style='flex:1 1 320px;min-width:260px;'>
          <h2 style='font-size:2rem;font-weight:700;color:#222;margin-bottom:0.5rem;'>Review</h2>
          <div style='font-size:1.1rem;color:#888;margin-bottom:1.5rem;'>Comparing with the average of all properties in Thanisandra Road</div>
          <div style='display:grid;grid-template-columns:repeat(3,1fr);gap:1.2rem 0.5rem;'>`;
      reviewMetrics.forEach((m, i) => {
        html += `<div style='display:flex;flex-direction:column;align-items:center;justify-content:center;padding:0.7rem 0.2rem;'>
          <span style='font-size:1.5rem;'>${m.icon}</span>
          <span style='font-size:1.35rem;font-weight:700;color:#222;margin:0.2rem 0;'>${m.value}</span>
          <span style='font-size:1rem;color:#888;'>${m.label}</span>
          <span style='font-size:0.95rem;color:#aaa;'>Avg is: ${m.avg}</span>
        </div>`;
      });
      html += `</div>
          <div style='margin-top:2rem;display:flex;gap:1rem;'>
            <button onclick='openInsightsModal()' style='background:#222;color:#fff;font-weight:600;padding:0.7rem 1.2rem;border-radius:7px;border:none;cursor:pointer;font-size:1rem;'>See Property Insights</button>
            <button onclick="window.location.href='home_page.html'" style='background:#fff;color:#222;font-weight:600;padding:0.7rem 1.2rem;border-radius:7px;border:1.5px solid #222;cursor:pointer;font-size:1rem;'>Compare With Peers</button>
          </div>
        </div>
      </div>
      <div style='margin-top:1.5rem;font-size:1.08rem;color:#444;max-width:700px;'>Placed <b>28.97km</b> away from the Kempegowda International Airport, <b>Lodha Mirabelle</b> is a fine example of thoughtful architectural design by <b>Lodha Developers</b>. Nestled close to the developing IT and manufacturing corridor in North Bengaluru, <b>Lodha Mirabelle</b> is a tasteful blend of function and aesthetics.</div>`;
      document.getElementById('reviewSection').innerHTML = html;
    }
    // Mock tower data for slider
    const towerDetails = [
      { floorCount: '28 floors', unitCount: '116 units', unitsPerFloor: '4 units per floor', elevatorCount: '3 elevators', elevatorRatio: '39 units / elevator', typologies: '2BHK, 3BHK' },
      { floorCount: '28 floors', unitCount: '120 units', unitsPerFloor: '4 units per floor', elevatorCount: '3 elevators', elevatorRatio: '40 units / elevator', typologies: '2BHK, 3BHK' },
      { floorCount: '28 floors', unitCount: '110 units', unitsPerFloor: '4 units per floor', elevatorCount: '3 elevators', elevatorRatio: '37 units / elevator', typologies: '2BHK, 3BHK' },
      { floorCount: '28 floors', unitCount: '115 units', unitsPerFloor: '4 units per floor', elevatorCount: '3 elevators', elevatorRatio: '38 units / elevator', typologies: '2BHK, 3BHK' },
      { floorCount: '28 floors', unitCount: '118 units', unitsPerFloor: '4 units per floor', elevatorCount: '3 elevators', elevatorRatio: '39 units / elevator', typologies: '2BHK, 3BHK' }
    ];
    let currentTower = 0;
    async function openInsightsModal() {
      document.getElementById('insightsModal').style.display = 'flex';
      renderInsightsModalContent();
    }
    function renderInsightsModalContent() {
      const p = cachedProperty;
      const s = cachedSpecs;
      let html = `<h2 style="margin-top:0;">Specifications</h2>`;
      html += `<div style='margin-bottom:1.2rem;'><b>${p?.name || ''}</b></div>`;
      html += `<div style='display:grid;grid-template-columns:1fr 1fr;gap:1.2rem 1.5rem;'>`;
      html += `<div><b>Towers</b><br>${p?.towers || '2 Towers'}</div>`;
      html += `<div><b>Floors</b><br>${p?.floors || '28 Floors'}</div>`;
      html += `<div><b>Achieved F.A.R.</b><br>${p?.far || '2.62'}</div>`;
      html += `<div><b>Land Type</b><br>${p?.land_type || 'Commercial'}</div>`;
      html += `<div><b>Water Source</b><br>${p?.water_source || 'BWSSB'}</div>`;
      html += `<div><b>Development Rights</b><br>${p?.development_rights || 'Joint Development'}</div>`;
      html += `<div><b>Unit Count</b><br>${p?.unit_count || '1100'}</div>`;
      html += `</div>`;
      html += `<hr style='margin:1.5rem 0 1.2rem 0;border:0;border-top:1.5px solid #eee;'>`;
      html += `<div style='margin-bottom:0.7rem;font-weight:600;'>An average unit in project</div>`;
      html += `<div style='display:grid;grid-template-columns:1fr 1fr;gap:1.2rem 1.5rem;margin-bottom:1.2rem;'>`;
      html += `<div><b>Master Bedroom Area</b><br>182.63 sqft<div style='color:#888;font-size:0.95em;'>Most master bedrooms span 182.63 sqft here, while the average in Thanisandra Road is 146 sqft.</div></div>`;
      html += `<div><b>Efficiency</b><br>63.40 %<div style='color:#888;font-size:0.95em;'>Calculated as Carpet Area / Saleable Area, it measures the architectural efficiency of a floor plan. The average in Thanisandra Road is 66%.</div></div>`;
      html += `<div><b>Balcony Area Ratio</b><br>7.70 %<div style='color:#888;font-size:0.95em;'>Calculated as Total Balcony Area / Carpet Area, it denotes the openness in a floor plan. The average in Thanisandra Road is 8%.</div></div>`;
      html += `<div><b>Floor Height</b><br>3.05 meters<div style='color:#888;font-size:0.95em;'>The height from the floor to the ceiling here is 3.05m, while the average in Thanisandra Road is 3 meters.</div></div>`;
      html += `<div><b>Common Walls</b><br>0 % common walls<div style='color:#888;font-size:0.95em;'>This indicates how many walls are shared between two or more units. Most units in Thanisandra Road have 0% common walls.</div></div>`;
      html += `<div><b>Per sqft. of Carpet Area</b><br>₹ 23084.20<div style='color:#888;font-size:0.95em;'>Calculated as Total Price / Carpet Area, it is the cost per sqft of unit's area. The average in Thanisandra Road is ₹16348.</div></div>`;
      html += `</div>`;
      html += `<hr style='margin:1.5rem 0 1.2rem 0;border:0;border-top:1.5px solid #eee;'>`;
      html += `<div style='margin-bottom:0.7rem;font-weight:600;'>Towers</div>`;
      html += `<div style='display:flex;align-items:center;gap:1.2rem;margin-bottom:1.2rem;'>
        <button onclick='changeTower(-1)' style='font-size:1.3rem;padding:0.3rem 0.7rem;border-radius:6px;border:1px solid #ccc;background:#f5f6fa;cursor:pointer;'>&lt;</button>
        <span style='font-size:1.1rem;font-weight:600;'>${currentTower+1}</span>
        <button onclick='changeTower(1)' style='font-size:1.3rem;padding:0.3rem 0.7rem;border-radius:6px;border:1px solid #ccc;background:#f5f6fa;cursor:pointer;'>&gt;</button>
        <span style='color:#888;font-size:0.98em;'>This configuration is in 3 towers</span>
      </div>`;
      const t = towerDetails[currentTower];
      html += `<div style='display:grid;grid-template-columns:1fr 1fr;gap:1.2rem 1.5rem;'>`;
      html += `<div><b>Floor Count</b><br>${t.floorCount}</div>`;
      html += `<div><b>Unit Count</b><br>${t.unitCount}</div>`;
      html += `<div><b>Units Per Floor</b><br>${t.unitsPerFloor}</div>`;
      html += `<div><b>Elevator Count</b><br>${t.elevatorCount}</div>`;
      html += `<div><b>Elevator Ratio</b><br>${t.elevatorRatio}</div>`;
      html += `<div><b>Typologies</b><br>${t.typologies}</div>`;
      html += `</div>`;
      document.getElementById('insightsModalContent').innerHTML = html;
    }
    function changeTower(dir) {
      currentTower += dir;
      if (currentTower < 0) currentTower = 0;
      if (currentTower >= towerDetails.length) currentTower = towerDetails.length - 1;
      renderInsightsModalContent();
    }
    function renderConnectivitySection() {
      // Example coordinates (property, metro, airport)
      const propertyCoords = [13.0702, 77.6245]; // Example: Lodha Mirabelle
      const locations = [
        { type: 'Metro', name: 'Nagarwara Metro Station', dist: '1.32 Km', time: '5 mins', coords: [13.0456, 77.6201] },
        { type: 'Railway', name: 'Thanisandra Railway Station', dist: '2.45 Km', time: '7 mins', coords: [13.0601, 77.6278] },
        { type: 'Metro', name: 'Kodigehalli Metro Station', dist: '7.06 Km', time: '13 mins', coords: [13.0802, 77.5921] },
        { type: 'Railway', name: 'SMVT Bengaluru Railway', dist: '7.62 Km', time: '17 mins', coords: [13.0092, 77.6271] },
        { type: 'Metro', name: 'Hebbal Metro Station', dist: '8.35 Km', time: '14 mins', coords: [13.0458, 77.5912] },
        { type: 'Airport', name: 'Kempegowda International Airport', dist: '28.97 Km', time: '40 mins', coords: [13.1986, 77.7066] }
      ];
      let html = `<div style='margin-bottom:1.2rem;'><h2 style='font-size:1.5rem;font-weight:700;color:#222;margin-bottom:0.5rem;'>Connectivity</h2>
        <div style='font-size:1.1rem;color:#888;margin-bottom:1.2rem;'>Lodha Mirabelle</div>
        <div id='map' style='height:320px;width:100%;max-width:700px;border-radius:10px;overflow:hidden;margin-bottom:1.5rem;'></div>
        <div style='display:flex;gap:1.5rem;flex-wrap:wrap;'>`;
      locations.forEach(loc => {
        html += `<div style='background:#fff;border-radius:8px;box-shadow:0 1px 6px rgba(0,0,0,0.06);padding:1rem 1.2rem;min-width:180px;flex:1 1 180px;'>
          <div style='font-size:1.1rem;font-weight:600;color:#1a237e;'>${loc.name}</div>
          <div style='font-size:1rem;color:#444;'>${loc.type}</div>
          <div style='font-size:0.98rem;color:#666;margin-top:0.2rem;'>${loc.dist} | ${loc.time}</div>
        </div>`;
      });
      html += `</div></div>`;
      document.getElementById('connectivitySection').innerHTML = html;
      // Initialize Leaflet map
      setTimeout(() => {
        const map = L.map('map').setView(propertyCoords, 13);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);
        // Property marker
        L.marker(propertyCoords).addTo(map).bindPopup('Lodha Mirabelle (Property)').openPopup();
        // Other locations
        locations.forEach(loc => {
          L.marker(loc.coords).addTo(map).bindPopup(`${loc.name} (${loc.type})<br>${loc.dist}, ${loc.time}`);
        });
      }, 100);
    }
    window.onload = () => {
      renderPropertyDetail();
      renderReviewSection();
      renderConnectivitySection();
    };
  </script>
</body>
</html> 